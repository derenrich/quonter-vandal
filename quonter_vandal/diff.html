<html>

<head>
    <title>Diff</title>
    <link rel="stylesheet"
        href="https://www.wikidata.org/w/load.php?modules=mediawiki.legacy.shared|mediawiki.diff.styles|wikibase.common&only=styles">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>

<body>
    <h1>{{ title_html }} (<a
            href="https://www.wikidata.org/w/index.php?title={{ qid }}&diff={{ to_rev }}&oldid={{ from_rev }}">diff</a>)
    </h1>
    <div>
        <table class="diff">
            <colgroup>
                <col class="diff-marker" />
                <col class="diff-content" />
                <col class="diff-marker" />
                <col class="diff-content" />
            </colgroup>
            <tbody class="diff-content">
                <tr>
                    <td class="diff-lineno" colspan="2">Prior Version</td>
                    <td class="diff-lineno" colspan="2">Next Version</td>
                </tr>
                {{ diff_html }}
            </tbody>
        </table>
    </div>
    <div>
        <iframe src="https://www.wikidata.org/w/index.php?oldid={{ from_rev }}" width="100%" height="1000px"></iframe>
    </div>
</body>

<script>
    $(document).ready(function () {
        let diffAnchors = $("table.diff a");
        // iterate over anchors and prepend "https://www.wikidata.org/" to href
        for (let anchor of diffAnchors) {
            let href = anchor.getAttribute("href");
            if (!href.startsWith("//")) {
                anchor.setAttribute("href", `https://www.wikidata.org${href}`);
            }
        }
    });
</script>

</html>